<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#000000">
    <title>Calculatrice Simple</title>
    <link rel="manifest" href="manifest.json">
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            background-color: #000;
            color: #fff;
            margin: 0;
            padding: 0;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }
        .slider {
            display: flex;
            width: 200%;  /* Deux pages côte à côte */
            transition: transform 0.5s ease; /* Transition fluide pour le glissement */
        }
        .page {
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: #111;
            flex-direction: column;
        }
        .history {
            font-size: 1em;
            margin-bottom: 20px;
            padding: 10px;
            border: 1px solid #555;
            background: #222;
            border-radius: 5px;
            color: #fff;
            max-height: 150px;
            overflow-y: auto;
        }
        .display {
            font-size: 2em;
            margin-bottom: 15px;
            padding: 15px;
            border: 1px solid #555;
            background: #222;
            border-radius: 5px;
            color: #fff;
        }
        .buttons {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            justify-content: center;
        }
        .buttons button {
            font-size: 1.2em;
            padding: 9px;
            weight: 40px;
            width: 100%;
            cursor: pointer;
            background-color: #fff;
            color: #000;
            font-weight: bold;
            border: none;
            border-radius: 10px;
            box-shadow: 2px 2px 5px rgba(255,255,255,0.2);
            text-transform: uppercase;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        .buttons button:hover {
            background-color: #ddd;
        }
        .c-button {
            background-color: #fff;
            color: red !important;
            border-radius: 10%;
            font-weight: bold;
            width: 100%;
            grid-column: 4;
        }
    </style>
    <script>
        let total = 0;
        let history = [];

        function add(amount, item) {
            total += amount;
            history.push(item);
            updateDisplay();
        }

        function removeLastEntry() {
            if (history.length > 0) {
                // Enlever la dernière entrée et ajuster le total
                let lastEntry = history.pop();
                
                // Utiliser une expression régulière pour extraire le montant avec €
                let lastAmountString = lastEntry.match(/(\d+[\.,]?\d*)€/); 
                
                if (lastAmountString && lastAmountString[1]) {
                    let lastAmount = parseFloat(lastAmountString[1].replace(',', '.')); // Convertir en nombre
                    if (!isNaN(lastAmount)) {  // Vérifie si la conversion a réussi
                        total -= lastAmount;  // Soustraire le montant du total
                        updateDisplay();  // Mettre à jour l'affichage
                    } else {
                        console.error('Erreur de conversion du montant', lastAmountString[1]);
                    }
                }
            }
        }

        function updateDisplay() {
            document.getElementById('total').textContent = total.toFixed(2) + ' €';
            document.getElementById('history').textContent = 'Historique : ' + history.join(' | ');
            document.getElementById('total2').textContent = total.toFixed(2) + ' €';
            document.getElementById('history2').textContent = 'Historique : ' + history.join(' | ');
        }

        function slideToPage(page) {
            const slider = document.getElementById('slider');
            slider.style.transform = `translateX(-${page * 100}%)`;
        }

        // Fonction pour naviguer manuellement
        function navigateToPage(page) {
            slideToPage(page);
        }
    </script>
</head>
<body>
    <div class="slider" id="slider">
        <!-- Première page -->
        <div class="page">
            <div class="history" id="history">Historique : </div>
            <div class="display" id="total">0 €</div>
            <div class="buttons">
                <button onclick="add(18.00, 'FORMULE 18,00€')">FORMULE <span>18,00€</span> </button>
                <button onclick="add(22.00, 'FORMULE 22,00€')">FORMULE <span>22,00€</span> </button>
                <button onclick="add(13.90, 'PDJ 13,90€')">PDJ <span>13,90€</span> </button>
                <button onclick="add(7.00, 'SANDWICH 7,00€')">SANDWICH <span>7,00€</span> </button>
                <button onclick="removeLastEntry()" class="c-button">←</button>
                <button onclick="navigateToPage(1)">Go to Page 2</button> <!-- Bouton pour passer à la deuxième page -->
            </div>
        </div>

        <!-- Deuxième page (copie de la première) -->
        <div class="page">
            <div class="history" id="history2">Historique : </div>
            <div class="display" id="total2">0 €</div>
            <div class="buttons">
                <button onclick="add(18.00, 'FORMULE 18,00€')">FORMULE <span>18,00€</span> </button>
                <button onclick="add(22.00, 'FORMULE 22,00€')">FORMULE <span>22,00€</span> </button>
                <button onclick="add(13.90, 'PDJ 13,90€')">PDJ <span>13,90€</span> </button>
                <button onclick="add(7.00, 'SANDWICH 7,00€')">SANDWICH <span>7,00€</span> </button>
                <button onclick="removeLastEntry()" class="c-button">←</button>
                <button onclick="navigateToPage(0)">Go to Page 1</button> <!-- Bouton pour revenir à la première page -->
            </div>
        </div>
    </div>
</body>
</html>
